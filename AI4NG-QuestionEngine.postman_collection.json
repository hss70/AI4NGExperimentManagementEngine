{
  "info": {
    "name": "AI4NG Question Engine API",
    "description": "Test collection for AI4NG Question Engine endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://3mybicfkv2.execute-api.eu-west-2.amazonaws.com/dev",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "YOUR_JWT_TOKEN_HERE",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Questionnaires",
      "item": [
        {
          "name": "Create Questionnaire (Researcher)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"PQ\",\n  \"data\": {\n    \"name\": \"Presence Questionnaire\",\n    \"description\": \"Measures the sense of presence in a virtual environment\",\n    \"estimatedTime\": 120,\n    \"version\": \"1.0\",\n    \"questions\": [\n      {\n        \"id\": \"1\",\n        \"text\": \"How much were you able to control events?\",\n        \"type\": \"scale\",\n        \"scale\": {\n          \"min\": 1,\n          \"max\": 7,\n          \"minLabel\": \"NOT AT ALL\",\n          \"maxLabel\": \"COMPLETELY\"\n        },\n        \"required\": true\n      },\n      {\n        \"id\": \"2\",\n        \"text\": \"How responsive was the environment to actions that you initiated?\",\n        \"type\": \"scale\",\n        \"scale\": {\n          \"min\": 1,\n          \"max\": 7,\n          \"minLabel\": \"NOT RESPONSIVE\",\n          \"maxLabel\": \"COMPLETELY RESPONSIVE\"\n        },\n        \"required\": true\n      }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/researcher/questionnaires",
              "host": ["{{baseUrl}}"],
              "path": ["api", "researcher", "questionnaires"]
            }
          }
        },
        {
          "name": "Get All Questionnaires",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/questionnaires",
              "host": ["{{baseUrl}}"],
              "path": ["api", "questionnaires"]
            }
          }
        },
        {
          "name": "Get Questionnaire by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/questionnaires/PQ",
              "host": ["{{baseUrl}}"],
              "path": ["api", "questionnaires", "PQ"]
            }
          }
        },
        {
          "name": "Update Questionnaire (Researcher)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"data\": {\n    \"name\": \"Presence Questionnaire - Updated\",\n    \"description\": \"Updated description\",\n    \"estimatedTime\": 150,\n    \"version\": \"1.1\",\n    \"questions\": [\n      {\n        \"id\": \"1\",\n        \"text\": \"How much were you able to control events?\",\n        \"type\": \"scale\",\n        \"scale\": {\n          \"min\": 1,\n          \"max\": 7,\n          \"minLabel\": \"NOT AT ALL\",\n          \"maxLabel\": \"COMPLETELY\"\n        },\n        \"required\": true\n      }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/researcher/questionnaires/PQ",
              "host": ["{{baseUrl}}"],
              "path": ["api", "researcher", "questionnaires", "PQ"]
            }
          }
        }
      ]
    },
    {
      "name": "Experiments",
      "item": [
        {
          "name": "Get All Experiments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/experiments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "experiments"]
            }
          }
        },
        {
          "name": "Get Experiment by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/experiments/{{experimentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "experiments", "{{experimentId}}"]
            }
          }
        },
        {
          "name": "Get My Experiments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/me/experiments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "me", "experiments"]
            }
          }
        },
        {
          "name": "Create Experiment (Researcher)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"data\": {\n    \"name\": \"BCI Learning Study\",\n    \"description\": \"A 21-day study on BCI skill acquisition\",\n    \"sessionTypes\": {\n      \"START\": {\n        \"name\": \"Initial Session\",\n        \"questionnaires\": [\"PreState\", \"PhysicalState\", \"VVIQ\", \"16PF5\"],\n        \"tasks\": [\"TRAIN_EEG_BASELINE\", \"BASELINE_QUESTIONS\"],\n        \"estimatedDuration\": 45\n      },\n      \"DAILY\": {\n        \"name\": \"Daily Training Session\",\n        \"questionnaires\": [\"PreState\", \"PhysicalState\", \"PQ\", \"TLX\"],\n        \"tasks\": [\"TRAIN_EEG\", \"POST_SESSION_QUESTIONS\"],\n        \"estimatedDuration\": 25\n      }\n    }\n  },\n  \"questionnaireConfig\": {\n    \"schedule\": {\n      \"PQ\": \"every_session\",\n      \"TLX\": \"every_session\",\n      \"16PF5\": \"once\",\n      \"VVIQ\": \"once\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/researcher/experiments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "researcher", "experiments"]
            }
          }
        },
        {
          "name": "Sync Experiment Sessions",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessions\": [\n    {\n      \"sessionId\": \"2023-11-07\",\n      \"date\": \"2023-11-07\",\n      \"type\": \"daily\",\n      \"userId\": \"USER_456\",\n      \"taskOrder\": [\"TASK#TRAIN_EEG\", \"TASK#POST_QUESTIONS\"]\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/experiments/{{experimentId}}/sync",
              "host": ["{{baseUrl}}"],
              "path": ["api", "experiments", "{{experimentId}}", "sync"]
            }
          }
        }
      ]
},
    {
      "name": "Responses",
      "item": [
        {
          "name": "Submit Response",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"experimentId\": \"{{experimentId}}\",\n  \"questionnaireId\": \"PQ\",\n  \"sessionId\": \"2023-11-07\",\n  \"taskId\": \"POST_QUESTIONS\",\n  \"answers\": [\n    {\n      \"questionId\": \"1\",\n      \"questionText\": \"How much were you able to control events?\",\n      \"answerValue\": \"7\"\n    },\n    {\n      \"questionId\": \"2\",\n      \"questionText\": \"How responsive was the environment to actions that you initiated?\",\n      \"answerValue\": \"5\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/responses",
              "host": ["{{baseUrl}}"],
              "path": ["api", "responses"]
            }
          }
        },
        {
          "name": "Get User Responses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/responses/{{experimentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "responses", "{{experimentId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Member Management",
      "item": [
        {
          "name": "Get Experiment Members (Researcher)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/experiments/{{experimentId}}/members",
              "host": ["{{baseUrl}}"],
              "path": ["api", "experiments", "{{experimentId}}", "members"]
            }
          }
        },
        {
          "name": "Add Member to Experiment (Researcher)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"participant\",\n  \"status\": \"active\",\n  \"cohort\": \"A\",\n  \"startDate\": \"2023-11-02\",\n  \"endDate\": \"2023-11-23\",\n  \"timezone\": \"Europe/London\",\n  \"pseudoId\": \"P-7GQ2K1\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/experiments/{{experimentId}}/members/{{userSub}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "experiments", "{{experimentId}}", "members", "{{userSub}}"]
            }
          }
        },
        {
          "name": "Remove Member from Experiment (Researcher)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/experiments/{{experimentId}}/members/{{userSub}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "experiments", "{{experimentId}}", "members", "{{userSub}}"]
            }
          }
        }
      ]
    }
  ]
}