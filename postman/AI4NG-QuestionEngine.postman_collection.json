{
    "info": {
        "name": "AI4NG Experiment Management Engine API",
        "description": "Collection for AI4NG Question/Experiment/Response APIs",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "auth": {
        "type": "bearer",
        "bearer": [
            {
                "key": "token",
                "value": "{{accessToken}}",
                "type": "string"
            }
        ]
    },
    "variable": [
        {
            "key": "baseUrl",
            "value": "{{apiGateWayUrl}}",
            "type": "string"
        },
        {
            "key": "jwt_token",
            "value": "{{accessToken}}",
            "type": "string"
        },
        {
            "key": "experimentId",
            "value": "test-experiment-id",
            "type": "string"
        },
        {
            "key": "questionnaireId",
            "value": "PQ",
            "type": "string"
        },
        {
            "key": "responseId",
            "value": "test-response-id",
            "type": "string"
        },
        {
            "key": "userSub",
            "value": "00000000-0000-0000-0000-000000000000",
            "type": "string"
        },
        {
            "key": "lastSyncTime",
            "value": "2025-10-13T09:00:00Z",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "Questionnaires",
            "item": [
                {
                    "name": "Create Questionnaire (Researcher)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"id\": \"{{questionnaireId}}\",\n  \"name\": \"Presence Questionnaire\",\n  \"description\": \"Measures presence\",\n  \"estimatedTime\": 120,\n  \"version\": \"1.0\",\n  \"questions\": [\n    { \"id\": \"1\", \"text\": \"How much were you able to control events?\", \"type\": \"scale\", \"required\": true, \"options\": [], \"scale\": { \"min\": 1, \"max\": 7 } }\n  ]\n}"
                        },
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/questionnaires",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "questionnaires"
                            ]
                        }
                    }
                },
                {
                    "name": "Get All Questionnaires",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/questionnaires",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "questionnaires"
                            ]
                        }
                    }
                },
                {
                    "name": "Get Questionnaire by ID",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/questionnaires/{{questionnaireId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "questionnaires",
                                "{{questionnaireId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "Update Questionnaire (Researcher)",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Presence Questionnaire - Updated\",\n  \"description\": \"Updated\",\n  \"estimatedTime\": 150,\n  \"version\": \"1.1\",\n  \"questions\": [ { \"id\": \"1\", \"text\": \"Updated?\", \"type\": \"scale\", \"required\": true, \"options\": [], \"scale\": { \"min\": 1, \"max\": 7 } } ]\n}"
                        },
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/questionnaires/{{questionnaireId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "questionnaires",
                                "{{questionnaireId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "Delete Questionnaire (Researcher)",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/questionnaires/{{questionnaireId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "questionnaires",
                                "{{questionnaireId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "Batch Create Questionnaires (Researcher)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "[{\"id\":\"PQ\",\"name\":\"Presence Questionnaire\",\"description\":\"Measures presence\",\"estimatedTime\":120,\"version\":\"1.0\",\"questions\":[{\"id\":\"q1\",\"text\":\"Control events?\",\"type\":\"choice\",\"options\":[\"1\",\"7\"],\"required\":true}]}]"
                        },
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/questionnaires/batch",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "questionnaires",
                                "batch"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Experiments",
            "item": [
                {
                    "name": "Get All Experiments",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/experiments",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "experiments"
                            ]
                        }
                    }
                },
                {
                    "name": "Get Experiment by ID",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/experiments/{{experimentId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "experiments",
                                "{{experimentId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "Get My Experiments",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/me/experiments",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "me",
                                "experiments"
                            ]
                        }
                    }
                },
                {
                    "name": "Sync Experiment",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/experiments/{{experimentId}}/sync?lastSyncTime={{lastSyncTime}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "experiments",
                                "{{experimentId}}",
                                "sync"
                            ],
                            "query": [
                                {
                                    "key": "lastSyncTime",
                                    "value": "{{lastSyncTime}}"
                                }
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Responses",
            "item": [
                {
                    "name": "Submit Response",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"data\": {\n    \"experimentId\": \"{{experimentId}}\",\n    \"questionnaireId\": \"{{questionnaireId}}\",\n    \"sessionId\": \"2023-11-07\",\n    \"responses\": [\n      { \"questionId\": \"1\", \"answer\": \"7\" },\n      { \"questionId\": \"2\", \"answer\": \"5\" }\n    ]\n  }\n}"
                        },
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/responses",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "responses"
                            ]
                        }
                    }
                },
                {
                    "name": "List Responses (filters optional)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/responses?experimentId={{experimentId}}&questionnaireId={{questionnaireId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "responses"
                            ],
                            "query": [
                                {
                                    "key": "experimentId",
                                    "value": "{{experimentId}}"
                                },
                                {
                                    "key": "questionnaireId",
                                    "value": "{{questionnaireId}}"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Get Response by ID",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/responses/id/{{responseId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "responses",
                                "{{responseId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "Update Response",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"data\": { \"responses\": [ { \"questionId\": \"1\", \"answer\": \"6\" } ] } }"
                        },
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/responses/id/{{responseId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "responses",
                                "{{responseId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "Delete Response",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/responses/id/{{responseId}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "responses",
                                "{{responseId}}"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Member Management",
            "item": [
                {
                    "name": "Get Experiment Members (Researcher)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/experiments/{{experimentId}}/members",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "experiments",
                                "{{experimentId}}",
                                "members"
                            ]
                        }
                    }
                },
                {
                    "name": "Add Member to Experiment (Researcher)",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"role\": \"participant\",\n  \"status\": \"active\",\n  \"cohort\": \"A\",\n  \"startDate\": \"2023-11-02\",\n  \"endDate\": \"2023-11-23\",\n  \"timezone\": \"Europe/London\",\n  \"pseudoId\": \"P-7GQ2K1\"\n}"
                        },
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/experiments/{{experimentId}}/members/{{userSub}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "experiments",
                                "{{experimentId}}",
                                "members",
                                "{{userSub}}"
                            ]
                        }
                    }
                },
                {
                    "name": "Remove Member from Experiment (Researcher)",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{apiGateWayUrl}}/api/experiments/{{experimentId}}/members/{{userSub}}",
                            "host": [
                                "{{apiGateWayUrl}}"
                            ],
                            "path": [
                                "api",
                                "experiments",
                                "{{experimentId}}",
                                "members",
                                "{{userSub}}"
                            ]
                        }
                    }
                }
            ]
        }
    ]
}